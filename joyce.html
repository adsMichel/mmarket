<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Coletor de Códigos de Barras</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.5/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.5/dist/sweetalert2.all.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js"></script>
    <style>
      body {
        /* Usando um fundo mais simples e focado para coletor */
        background: linear-gradient(135deg, #1f2937 0%, #374151 100%);
      }

      #interactive {
        width: 100%;
        height: 100%;
      }

      #interactive video {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .scanner-overlay {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 280px;
        height: 280px;
        border: 3px solid #34d399; /* Cor verde para destaque */
        border-radius: 24px;
        box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
        pointer-events: none;
      }

      .scanner-line {
        position: absolute;
        width: 100%;
        height: 3px;
        background: #34d399;
        top: 50%;
      }
      
      /* Removendo animação de scan para leitura contínua */

      .corner {
        position: absolute;
        width: 40px;
        height: 40px;
        border: 4px solid #34d399;
      }

      .corner-tl {
        top: -2px;
        left: -2px;
        border-right: none;
        border-bottom: none;
        border-radius: 24px 0 0 0;
      }
      .corner-tr {
        top: -2px;
        right: -2px;
        border-left: none;
        border-bottom: none;
        border-radius: 0 24px 0 0;
      }
      .corner-bl {
        bottom: -2px;
        left: -2px;
        border-right: none;
        border-top: none;
        border-radius: 0 0 0 24px;
      }
      .corner-br {
        bottom: -2px;
        right: -2px;
        border-left: none;
        border-top: none;
        border-radius: 0 0 24px 0;
      }
      
      .product-modal-container {
        max-height: 80vh;
        overflow-y: auto;
      }
      
      /* Estilos para o novo modal de entrada de dados */
      #data-entry-modal {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 50;
      }
      
      #detected-code {
        display: flex;
        justify-content: space-between;
        padding: 0.5rem 1rem;
        background-color: #f0fdf4; /* Verde claro */
        border: 1px solid #bbf7d0;
        border-radius: 0.75rem;
      }
    </style>
  </head>
  <body class="h-screen overflow-hidden">
    <header id="main-header" class="p-3 fixed top-0 left-0 right-0 z-10 bg-gray-900/80 backdrop-blur-sm">
      <div class="max-w-md mx-auto flex justify-between items-center">
        <h1 class="text-lg font-bold text-white">Coletor de Dados</h1>
        <p class="text-sm font-semibold text-green-300">
          Total de Códigos: <span id="total-codigos-header">0</span>
        </p>
      </div>
    </header>

        <div
      id="home-screen"
      class="h-full flex flex-col items-center justify-center p-6 hidden"
    >
          </div>

        <div id="scanner-area" class="fixed inset-0 w-full h-full">
      <div id="interactive" class="w-full h-full bg-gray-900"></div>

      <div class="scanner-overlay">
        <div class="corner corner-tl"></div>
        <div class="corner corner-tr"></div>
        <div class="corner corner-bl"></div>
        <div class="corner corner-br"></div>
              </div>
    </div>

        <div
      id="data-entry-modal"
      class="hidden bg-white rounded-3xl w-full max-w-sm p-6 shadow-2xl border border-gray-100"
    >
      <h3 class="text-xl font-bold text-gray-800 mb-4">Adicionar Código</h3>
      
            <div id="detected-code" class="mb-4">
        <p class="text-sm text-green-700 font-medium">CÓDIGO:</p>
        <p id="modal-detected-ean" class="text-sm font-bold text-green-900 truncate">EAN Aqui</p>
      </div>
      
            <div>
        <label class="block text-sm font-medium text-gray-700 mb-2"
          >Nome/Descrição do Item</label
        >
        <input
          type="text"
          id="input-nome-produto"
          placeholder="Ex: Refrigerante Lata 350ml"
          class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:outline-none transition"
        />
      </div>

      <button
        id="btn-adicionar-codigo"
        class="w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-3 rounded-xl font-semibold hover:from-green-600 hover:to-green-700 transition shadow-lg shadow-green-500/30 mt-4 disabled:opacity-50"
        disabled
      >
        Adicionar e Continuar Lendo
      </button>
    </div>
    
        <div
      class="fixed bottom-0 left-0 right-0 z-30 bg-gradient-to-t from-black/80 to-transparent pb-8 pt-6"
    >
      <div class="flex justify-around items-end px-8 max-w-md mx-auto">
        
                <button
          id="btn-lista-coletada"
          class="flex flex-col items-center gap-2 text-white/70 hover:text-white transition"
        >
          <div
            class="w-12 h-12 bg-white/10 rounded-xl flex items-center justify-center backdrop-blur-sm"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"
              />
            </svg>
          </div>
          <span class="text-xs font-medium">Lista Coletada</span>
        </button>
        
                <button id="btn-ler-parar" class="flex flex-col items-center gap-2 -mt-4">
          <div
            class="w-16 h-16 bg-gradient-to-br from-green-400 to-green-600 rounded-2xl flex items-center justify-center shadow-lg shadow-green-500/50 hover:scale-105 transition transform"
          >
            <svg
              class="w-7 h-7"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
                            <path
                id="icon-ler"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"
              />
                            <path
                id="icon-parar"
                class="hidden"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              />
            </svg>
          </div>
          <span id="label-ler-parar" class="text-white text-xs font-medium">Ler</span>
        </button>

                <button
          id="btn-adicionar-manual"
          class="flex flex-col items-center gap-2 text-white/70 hover:text-white transition"
        >
          <div
            class="w-12 h-12 bg-white/10 rounded-xl flex items-center justify-center backdrop-blur-sm"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="w-6 h-6"
            >
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z" />
              <polyline points="14 2 14 8 20 8" />
              <line x1="12" y1="18" x2="12" y2="12" />
              <line x1="9" y1="15" x2="15" y2="15" />
            </svg>
          </div>
          <span class="text-xs font-medium">Manual</span>
        </button>
      </div>
    </div>

        <div
      id="list-modal"
      class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm z-40 flex p-4 items-end justify-center sm:items-center"
    >
      <div class="bg-white rounded-t-3xl sm:rounded-3xl w-full max-w-md p-5 product-modal-container">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-xl font-bold text-gray-800">Códigos Coletados</h2>
          <button
            class="close-list-button text-gray-400 hover:text-gray-600 transition"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              />
            </svg>
          </button>
        </div>
        
        <ul id="lista-produtos" class="space-y-3 mb-4">
          <li
            id="lista-vazia-mensagem"
            class="bg-gray-100 p-4 rounded-xl shadow-inner text-center text-gray-500"
          >
            A lista está vazia. Comece a escanear!
          </li>
        </ul>
        
        <div class="pt-3 border-t border-gray-200 space-y-3">
            <button 
                id="btn-enviar-email" 
                class="w-full bg-blue-500 text-white py-3 rounded-xl font-semibold hover:bg-blue-600 transition disabled:opacity-50 flex items-center justify-center gap-2"
                disabled
            >
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8m-2 4v4a2 2 0 01-2 2H7a2 2 0 01-2-2v-4M4 7l.88-1.54a2 2 0 011.83-.93h12.58a2 2 0 011.83.93L20 7" /></svg>
                Enviar Códigos por Email
            </button>
            <button 
                id="btn-limpar-lista" 
                class="w-full bg-red-500 text-white py-3 rounded-xl font-semibold hover:bg-red-600 transition disabled:opacity-50"
                disabled
            >
                Limpar Lista
            </button>
        </div>
      </div>
    </div>


    <script>
      // Configuração do QuaggaJS
      const config = {
        inputStream: {
          name: "Live",
          type: "LiveStream",
          target: document.querySelector("#interactive"),
          constraints: {
            width: 640,
            height: 480,
            facingMode: "environment",
          },
          area: {
            top: "20%",
            right: "20%",
            left: "20%",
            bottom: "20%"
          }
        },
        decoder: {
          readers: [
            "ean_reader",
            "ean_8_reader",
            "code_128_reader",
            "code_39_reader",
          ],
          multiple: false,
        },
        locate: true,
        locator: {
          patchSize: "medium",
          halfSample: true,
        },
        frequency: 10,
      };

      // Elementos de navegação e telas
      const homeScreen = document.getElementById("home-screen");
      const scannerArea = document.getElementById("scanner-area");
      const interactive = document.getElementById("interactive");

      // Botões da Barra Inferior
      const btnLerParar = document.getElementById("btn-ler-parar");
      const labelLerParar = document.getElementById("label-ler-parar");
      const iconLer = document.getElementById("icon-ler");
      const iconParar = document.getElementById("icon-parar");
      const btnListaColetada = document.getElementById("btn-lista-coletada");
      const btnAdicionarManual = document.getElementById("btn-adicionar-manual");


      // Elementos do DOM do Modal de Entrada de Dados (Simplificado)
      const dataEntryModal = document.getElementById("data-entry-modal");
      const modalDetectedEan = document.getElementById("modal-detected-ean");
      const inputNomeProduto = document.getElementById("input-nome-produto");
      const btnAdicionarCodigo = document.getElementById("btn-adicionar-codigo");
      

      // Elementos do DOM do Modal da Lista
      const listModal = document.getElementById("list-modal");
      const closeListModalBtn = listModal.querySelector(".close-list-button");
      const listaProdutosEl = document.getElementById("lista-produtos");
      const listaVaziaMsg = document.getElementById("lista-vazia-mensagem");
      const btnLimparLista = document.getElementById("btn-limpar-lista");
      const btnEnviarEmail = document.getElementById("btn-enviar-email");
      const totalCodigosHeader = document.getElementById("total-codigos-header");


      let scannerEmFuncionamento = false;
      let codigoAtualParaRegistro = null;
      
      // Chave do localStorage
      const STORAGE_KEY = 'listaDeCodigosColetados';

      // --- FUNÇÕES DE ARMAZENAMENTO ---
      
      /** Carrega a lista de códigos do localStorage. */
      function carregarLista() {
          const listaJSON = localStorage.getItem(STORAGE_KEY);
          return listaJSON ? JSON.parse(listaJSON) : [];
      }
      
      /** Salva a lista de códigos no localStorage. */
      function salvarLista(lista) {
          localStorage.setItem(STORAGE_KEY, JSON.stringify(lista));
          atualizarContadorTotal(); // Garante que o contador seja sempre atualizado
      }
      
      /** Atualiza o contador de códigos no header. */
      function atualizarContadorTotal() {
          const lista = carregarLista();
          totalCodigosHeader.textContent = lista.length;
          btnLimparLista.disabled = lista.length === 0;
          btnEnviarEmail.disabled = lista.length === 0;
      }

      // --- FUNÇÕES DE RENDERIZAÇÃO E LISTA ---
      
      /** Renderiza a lista de códigos no modal. */
      function renderizarLista() {
        const lista = carregarLista();
        listaProdutosEl.innerHTML = "";
        
        if (lista.length === 0) {
          listaProdutosEl.appendChild(listaVaziaMsg);
        } else {
          lista.forEach((item, index) => {
            const listItem = document.createElement("li");
            listItem.className = "bg-gray-50 p-3 rounded-xl shadow-sm flex justify-between items-center border border-gray-200";
            listItem.innerHTML = `
              <div class="truncate mr-4">
                <p class="font-semibold text-gray-900">${item.nome}</p>
                <p class="text-xs text-gray-500">CÓDIGO: ${item.ean}</p>
              </div>
              <button data-index="${index}" class="btn-remover text-red-500 hover:text-red-700 transition flex-shrink-0">
                     <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>
              </button>
            `;
            listaProdutosEl.appendChild(listItem);
          });
          
          // Adiciona listeners aos botões de remoção
          document.querySelectorAll('.btn-remover').forEach(button => {
              button.addEventListener('click', removerCodigo);
          });
        }
      }

      /** Remove um código da lista pelo seu índice. */
      function removerCodigo(event) {
          const index = parseInt(event.currentTarget.dataset.index);
          let lista = carregarLista();
          
          if (index > -1 && index < lista.length) {
              lista.splice(index, 1); // Remove 1 elemento no índice
              salvarLista(lista);
              renderizarLista(); // Re-renderiza a lista no modal
          }
      }
      
      /** Limpa toda a lista de códigos. */
      function limparLista() {
          Swal.fire({
            title: 'Tem certeza?',
            text: "Esta ação não pode ser desfeita!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#d33',
            cancelButtonColor: '#3085d6',
            confirmButtonText: 'Sim, limpar lista!'
          }).then((result) => {
            if (result.isConfirmed) {
              salvarLista([]);
              renderizarLista();
              Swal.fire('Limpo!', 'A lista de códigos foi zerada.', 'success');
            }
          })
      }

      // --- FUNÇÃO DE EMAIL ---
      
      function enviarListaPorEmail() {
        const lista = carregarLista();
        if (lista.length === 0) {
          Swal.fire('Lista Vazia', 'Não há códigos para enviar.', 'info');
          return;
        }
        
        // Cria o corpo do email formatado
        let corpoEmail = "Lista de Códigos de Barras Coletados:\n\n";
        
        lista.forEach(item => {
          corpoEmail += `CÓDIGO: ${item.ean}\nDESCRIÇÃO: ${item.nome}\n---\n`;
        });
        
        // Codifica o corpo do e-mail para URL (necessário para o mailto)
        const subject = encodeURIComponent("Lista de Códigos de Barras - Coletor");
        const body = encodeURIComponent(corpoEmail);
        
        // Cria o link mailto
        const mailtoLink = `mailto:?subject=${subject}&body=${body}`;
        
        // Abre o cliente de email
        window.location.href = mailtoLink;
        
        // Fechar o modal após acionar o email
        fecharListModal();
      }

      // --- FUNÇÕES DO SCANNER E NAVEGAÇÃO ---

      function pararScanner(callback) {
        if (!scannerEmFuncionamento) return;

        Quagga.stop(function () {
          const video = interactive.querySelector("video");
          if (video && video.srcObject) {
            video.srcObject.getTracks().forEach((track) => {
              track.stop();
            });
            video.srcObject = null;
          }

          codigoAtualParaRegistro = null; // Limpa o código para registro
          interactive.innerHTML = "";
          
          scannerArea.classList.add("hidden");
          homeScreen.classList.remove("hidden"); // Volta para uma tela de fundo simples

          // Atualiza o botão de controle
          labelLerParar.textContent = "Ler";
          iconLer.classList.remove("hidden");
          iconParar.classList.add("hidden");

          if (callback) callback();
        });

        scannerEmFuncionamento = false;
      }

      function iniciarScanner() {
        if (scannerEmFuncionamento) return;

        homeScreen.classList.add("hidden");
        scannerArea.classList.remove("hidden");
        dataEntryModal.classList.add("hidden"); // Garante que o modal de entrada esteja fechado
        interactive.innerHTML = "";

        Quagga.init(config, function (err) {
          if (err) {
            console.error("Erro ao inicializar o Quagga:", err);
            alert("Erro ao iniciar a câmera! Verifique as permissões.");
            pararScanner();
            return;
          }
          Quagga.start();
          scannerEmFuncionamento = true;

          // Atualiza o botão de controle
          labelLerParar.textContent = "Parar";
          iconLer.classList.add("hidden");
          iconParar.classList.remove("hidden");
        });
      }
      
      // Quando um código é detectado (NÃO PARA)
      Quagga.onDetected(function (data) {
        const novoCodigo = data.codeResult.code;

        // Apenas processa se for um EAN (13 dígitos) ou outro código válido e diferente do anterior
        if (novoCodigo && novoCodigo.length >= 8) {
            // Se o código for diferente do último, abre o modal
            if (novoCodigo !== codigoAtualParaRegistro) {
                codigoAtualParaRegistro = novoCodigo;
                abrirDataEntryModal(novoCodigo);
            }
        }
      });
      
      // Função de desenhar o bounding box (melhora a visualização do Quagga)
      Quagga.onProcessed(function(result) {
          var drawingCtx = Quagga.canvas.ctx.overlay,
              drawingCanvas = Quagga.canvas.dom.overlay;

          if (result) {
              if (result.boxes) {
                  drawingCtx.clearRect(0, 0, parseInt(drawingCanvas.getAttribute("width")), parseInt(drawingCanvas.getAttribute("height")));
                  result.boxes.filter(function(box) {
                      return box !== result.box;
                  }).forEach(function(box) {
                      Quagga.ImageDebug.drawPath(box, {x: 0, y: 1}, drawingCtx, "#60a5fa");
                  });
              }

              if (result.box) {
                  Quagga.ImageDebug.drawPath(result.box, {x: 0, y: 1}, drawingCtx, "#34d399", 5);
              }

              if (result.codeResult && result.line) {
                  Quagga.ImageDebug.drawPath(result.line, {x: 'x', y: 'y'}, drawingCtx, '#34d399', 5);
              }
          }
      });

      // --- FUNÇÕES DE MODAL ---

      function abrirDataEntryModal(ean, nomePadrao = '') {
        modalDetectedEan.textContent = ean;
        inputNomeProduto.value = nomePadrao; 
        dataEntryModal.classList.remove("hidden");
        inputNomeProduto.focus();
        codigoAtualParaRegistro = ean; // Mantém o EAN atual em registro

        // Habilita/desabilita o botão Adicionar ao digitar no campo Nome
        const checkInput = () => {
          btnAdicionarCodigo.disabled = inputNomeProduto.value.trim() === "";
        };
        inputNomeProduto.oninput = checkInput;
        checkInput(); // Executa para o estado inicial
      }

      function fecharDataEntryModal() {
        dataEntryModal.classList.add("hidden");
        codigoAtualParaRegistro = null; // Libera para escanear o mesmo código novamente
        inputNomeProduto.oninput = null;
      }
      
      function abrirListModal() {
          if (scannerEmFuncionamento) {
            // Se estiver lendo, avisa e para a leitura antes de abrir a lista
            Swal.fire({
              title: 'Leitor em Uso',
              text: "A leitura de códigos será parada para visualizar a lista.",
              icon: 'info',
              showCancelButton: true,
              confirmButtonText: 'Parar e Ver Lista'
            }).then((result) => {
              if (result.isConfirmed) {
                pararScanner(() => {
                  renderizarLista(); 
                  listModal.classList.remove('hidden');
                });
              }
            });
          } else {
            renderizarLista(); 
            listModal.classList.remove('hidden');
          }
      }
      
      function fecharListModal() {
          listModal.classList.add('hidden');
      }

      // --- EVENT LISTENERS ---

      document.addEventListener("DOMContentLoaded", () => {
        // Inicializa o contador
        atualizarContadorTotal();
        
        // Inicia a câmera automaticamente (pode ser desabilitado se preferir)
        iniciarScanner();
        
        // 1. Botão Ler/Parar (Scanner)
        btnLerParar.addEventListener("click", () => {
          if (scannerEmFuncionamento) {
            pararScanner();
          } else {
            iniciarScanner();
          }
          fecharDataEntryModal(); // Fecha o modal de entrada se estiver aberto
        });
        
        // 2. Botão Lista Coletada
        btnListaColetada.addEventListener("click", abrirListModal);
        
        // 3. Botão Adicionar Manual
        btnAdicionarManual.addEventListener("click", () => {
          pararScanner(); // Para o scanner se estiver ligado
          // Abre o modal pedindo o código manualmente
          Swal.fire({
            title: 'Inserir Código Manualmente',
            input: 'text',
            inputLabel: 'Digite o Código de Barras (EAN, etc.)',
            showCancelButton: true,
            confirmButtonText: 'Continuar',
            showLoaderOnConfirm: true,
            preConfirm: (codigo) => {
              if (!codigo || codigo.trim() === '') {
                Swal.showValidationMessage('O código não pode ser vazio.');
                return false;
              }
              return codigo.trim();
            }
          }).then((result) => {
            if (result.isConfirmed) {
              // Abre o modal de entrada de nome com o código manual
              abrirDataEntryModal(result.value, "Item Inserido Manualmente");
            }
          });
        });

        // Fechar Modal da Lista
        closeListModalBtn.addEventListener("click", fecharListModal);
        listModal.addEventListener("click", (event) => {
          if (event.target === listModal) { fecharListModal(); }
        });
        
        // Limpar Lista
        btnLimparLista.addEventListener('click', limparLista);
        
        // Enviar Email
        btnEnviarEmail.addEventListener('click', enviarListaPorEmail);


        // 4. Adicionar Código (dentro do dataEntryModal)
        btnAdicionarCodigo.addEventListener("click", () => {
          const ean = modalDetectedEan.textContent;
          const nome = inputNomeProduto.value.trim();
          
          if (nome === "") {
              alert("Por favor, digite o nome/descrição do item.");
              return;
          }
          
          const novoItem = {
              nome: nome,
              ean: ean
          };
          
          // Carrega, adiciona e salva
          const listaAtual = carregarLista();
          listaAtual.push(novoItem);
          salvarLista(listaAtual);

          Swal.fire({
            title: "Código Adicionado! ✅",
            showConfirmButton: false,
            timer: 1500,
            toast: true,
            position: 'top-end'
          });

          fecharDataEntryModal();
        });
      });
    </script>
  </body>
</html>